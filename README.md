# Music_service

team: Геливера Ксения, Матвеева Елизавета, Пикулькин Дмитрий

# Цели и содержание проекта
Музыкальные стриминговые сервисы стали основным способом получения аудиоконтента в начале нового тысячелетия и не теряют своей актуальности по сей день. Возможность получить в пользование своей аудиотеки любую музыкальную композицию за небольшую по сравнению с покупкой каждого релиза цену является основным преимуществом такого вида платформ.

В то же время, пополнение медиатеки и пользовательской базы влечёт за собой необходимость не только масштабировать и распределять ресурсы для бесперебойной работы своего приложения или сайта, но и грамотной организации данных с целью недопущения ошибок – как содержательных, по типу неправильного сопоставления артиста и композиции, так и репутационных и, в первую очередь, финансовых.

Данные, имеющиеся у стриминговых сервисов, можно использовать не только для администрирования таких площадок, но и для проведения исследований популярности, охвата, возвращаемости слушателей к конкретным исполнителям и композициям. Например, именно на основании таких исследований большинство музыкальных сервисов подводят итоги года в начале декабря – пока не наступила Wham!мания, значимо изменяющая рейтинг любимых композиций слушателей.

Мы считаем, что база данных для музыкального сервиса будет являться ценным инструментом для пользователей, которые хотят выявить информацию о композициях, плейлистах и альбомах с одной стороны, и для владельцев стримингового сервиса, с другой стороны, предоставляя инсайты для развития собственной платформы и поддержания её работоспособности «с нуля».

Наш проект был бы интересен:
*	Владельцам площадок музыкального стриминга с целью сопоставления имеющейся у них структуры данных с той, которую мы считаем оптимальной для длительного развития продукта;
*	Слушателям стриминговых платформ, интересующимся о внутреннем устройстве стриминговых платформ;
*	Всем интересующимся музыкальной индустрией, кто хотел бы собрать актуальную статистику.

Таким образом, цель нашего проекта — создание базы данных для музыкального стриминга. Мы намерены разработать структуру, которая обеспечит эффективное хранение и доступ к информации о музыкальных треках, исполнителях, альбомах, пользователях и плейлистах. Эта база данных будет поддерживать все функции музыкальной платформы, включая поиск, рекомендации, создание плейлистов.

Дополнительно, данный стриминговый сервис предоставляет возможность артистам загружать свою музыку на платформу, тем самым расширяя каталог доступного контента и поддерживая начинающих исполнителей.

Основной план работы:
1. Создание концептуальной схемы
2. Проектирование реляционной модели
3. Развертывание БД в SQLLite
4. Разработка клиентского приложения

# Концептуальное проектирование
## Краткое описание предметной области
Стриминговый сервис - это онлайн-платформа, которая предоставляет пользователям доступ к мультимедийному контенту, такому как видео, музыка, подкасты или игры, без необходимости скачивания файлов. В данном проекте мы сконцентрируемся только на музыке с целью максимальной проработки узкоопределенной сферы стриминговых платформ.

<i>Основные задачи:</i>

* Хранение структурированных данных об имеющемся контенте.
* Хранение структурированных данных о пользователях платформы.
* Обеспечение взаимодействия и синхронизации данных о взаимодействиях пользователей и контента.
* Поддержка аналитических запросов.
* Поддержка предоставления возможности создания визуализаций и репортов с целью проведения аналитики и предоставления результатов деятельности различным категориям заинтересованных лиц.

## Описание имеющихся данных
Для наполнения базы данных музыкальными данными был использован ресурс Discogs — один из крупнейших онлайн-архивов музыкальной информации, предоставляющий доступ к данным через API. С помощью API Discogs была собрана информация о музыкальных треках, альбомах, исполнителях, жанрах и других важных метаданных, которые были использованы для создания и пополнения нашей базы данных.

Для всех отсутствующих данных нами были сгенерированы небольшие семплы данных, опирающихся на настоящие файлы.

## Описание процесса построения инфологической модели с обоснованием выделения сущностей и связей
Наша база данных посвящена сервису прослушивания музыки, а именно функционированию взаимодействия между слушателем, исполнителем и композициями. На основе исследования пользовательского опыта и анализа статей, посвященных функционированию сервисов для онлайн-просмотра фильмов и прослушивания музыки с целью обогащения собственного опыта, нами было выделено 10 сущностей.

В первую очередь, это всё, что связано с людьми: 
* Мастер-сущность «Персона», содержащая в качестве атрибутов регистрационные данные
* «Слушатель» с типом подписки 
* «Артист», содержащая название артиста и его тип. 
* Сущности «Артист» наследуют сущность «Исполнитель» и «Группа» - в зависимости от того, какое количество человек является Артистами.

Второй стороной сервиса является потребляемый и загружаемый контент: 
* Единичной и основной сущностью является «Композиция», у которой есть атрибуты названия, даты создания, даты загрузки на сервис, длительность и автор
* Кроме того, «Композиция» имеет «Текст» и может быть отнесена к нескольким «Жанрам»
* «Композиция» может относиться к «Альбому», у которого есть название, дата создания, количество композиций и формат (сингл или альбом), и к «Плейлисту», имеющему название, тип публичности и дату создания.

## Ссылка на ERD и TRD
<p><a href="https://www.figma.com/board/bGEV6S15C9Pgm6UwMuc20H/Database-Design?node-id=4-78&t=QqhpE8JJA3hhTiaP-1">ER-диаграмма и реляционная модель</a></p>

# Концептуальное проектирование
1. Преобразование сущностей в таблицы: Каждая сущность из ER-диаграммы преобразуется в таблицу. При этом атрибуты сущностей становятся столбцами таблиц. Пример: сущность «Композиция» становится таблицей songs с атрибутами songId, songName, songDateCreation, songDateAdding, songDuration и songAuthor.
2. Идентификация первичных ключей: Для таблиц выбирается первичный ключ (PK), обеспечивающий уникальную идентификацию записей. Пример: songId в таблице songs.
3. Реализация связей. Связи "один ко многим" (1:N): Например, один альбом может быть связан с несколькими композициями. Для этого в таблицу songs добавляется внешний ключ albumId, который ссылается на albumId в таблице albums.
4. Связи "многие ко многим" (M:N): Примеры: связь между персонами (persons) и плейлистами (playlists); связь между композицией (songs) и плейлистами (playlists). У каждой персоны может быть несколько плейлистов, а каждый плейлист может быть сохранен у нескольких персон (пример из бизнеса - публичные подборки редакции, которые сохраняют несколько пользователей к себе). Одна композиция может входить в несколько плейлистов, и несколько плейлистов могут содержать одни и те же песни. При проектировании базы данных связи между данными сущностями, относительно которых происходило формирование отношений, были оформлены посредством т.н. промежуточных таблиц, содержащих указание на уникальные идентификаторы подобных парных сущностей - Персон и Плейлистов, Песен и Плейлистов. 
5. Реализация наследования отсутствует, поскольку все таблицы являются уникальными.
6. Установление связей между таблицами через внешние ключи: Внешние ключи связывают таблицы, поддерживая ссылочную целостность данных, что особенно важно в контексте связей «многие ко многим».

# Развертывание Базы данных
Инструмент chartdb.io позволяет создать DDL-скрипт, учитывающий все виды связей, ключей и особые условия (автоинкремент, не-поддерживание нулевых значений и пр.). Таким образом, получив скрипт и несколько изменив его, мы получаем необходимый код для создания таблицы на диалекте SQLite (см. гитхаб).
В то же время, для выбранного инструмента визуализации нами была выбрана связка ClickHouse + DataLens от Яндекса.

# Разработка клиентского приложения
<a href="https://datalens.yandex/sgl08jjtgmcge">Дашборд</a>

# Заключение
В рамках проекта на основе набора статичных данных были сгенерированы некоторые фиктивные данные, отражающие активность пользователей. На общей совокупности данных была построена База данных, позволяющая более эффективно проводить аналитику деятельности стриминговой платформы и активности пользователей. 

Также, в проекте были продемонстрированы навыки интеграции работы современных систем конструирования диаграмм отношений (сущностных и табличных) и систем работы с базами данных (DBeaver, ClickHouse).
Создание базы данных на основе деятельности стриминговых музыкальных площадок открывает возможности для более глубокого эксплораторного анализа текущих данных, в т.ч. с использованием real-time дашбордов в дружелюбной для исполнителей и стейкхолдеров системе, апробации машинного обучения (генерация отсутствующих данных при помощи LLM, кластеризация пользователей), тестирование и отладка sql-запросов и возможностей встраивания новых сущностей в уже построенную систему. 

Таким образом, построение единой целостной структуры разрозненных данных в формате Базы с соблюдением всех принципов создания архитектуры базы данных позволяет создать удобное, устойчивое, масштабируемое и продуктивное решение для взаимодействия с данными.
